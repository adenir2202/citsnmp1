#! /usr/local/bin/perl

#use strict;

use Net::SNMP;
@OIDM= (UCD-SNMP-MIB::dskAvail);

@OIDS= ("1.3.6.1.2.1.1.1.0", 
	"1.3.6.1.2.1.1.2.0",
	"1.3.6.1.2.1.1.3.0",
	"1.3.6.1.2.1.1.4.0",
	"1.3.6.1.2.1.1.5.0",
	"1.3.6.1.2.1.1.6.0",
	"1.3.6.1.2.1.1.7.0",
	"1.3.6.1.2.1.2.1.0",
	"1.3.6.1.4.1.2021.10.1.3.1",
	"1.3.6.1.4.1.2021.10.1.3.2",
	"1.3.6.1.4.1.2021.10.1.3.3",
"1.3.6.1.4.1.2021.11.9.0",
"1.3.6.1.4.1.2021.11.50.0",
"1.3.6.1.4.1.2021.11.10.0",
"1.3.6.1.4.1.2021.11.52.0",
"1.3.6.1.4.1.2021.11.11.0",
"1.3.6.1.4.1.2021.11.53.0",
"1.3.6.1.4.1.2021.11.51.0",
"1.3.6.1.4.1.2021.4.3.0",
"1.3.6.1.4.1.2021.4.4.0",
"1.3.6.1.4.1.2021.4.5.0",
"1.3.6.1.4.1.2021.4.6.0",
"1.3.6.1.4.1.2021.4.11.0",
"1.3.6.1.4.1.2021.4.13.0",
"1.3.6.1.4.1.2021.4.14.0",
"1.3.6.1.4.1.2021.4.15.0",
"1.3.6.1.4.1.2021.9.1.2.1",
"1.3.6.1.4.1.2021.9.1.3.1",
"1.3.6.1.4.1.2021.9.1.6.1",
"1.3.6.1.4.1.2021.9.1.7.1",
"1.3.6.1.4.1.2021.9.1.8.1",
"1.3.6.1.4.1.2021.9.1.9.1",
"1.3.6.1.4.1.2021.9.1.10.1");
 
foreach my $host (@ARGV)
{
    foreach $oid(@OIDS) {
    	my ($session, $error) = Net::SNMP->session(
        	-hostname  =>  $host,
        	-community => 'public',
        	-port => 161
        );

   	if (!defined($session)) {
      		printf("ERROR: %s.\n", $error);
      		exit 1;
   	}

   	my $result = $session->get_request(-varbindlist => [$oid] );

   	if (!defined($result)) {
      		printf("ERROR: %s.\n", $session->error);
      		$session->close;
      #		exit 1;
   	}

   	printf("Host='%s' OID='%s' is %s\n", $session->hostname,  $oid, $result->{$oid} );

   	$session->close;
    }
}

exit 0;

